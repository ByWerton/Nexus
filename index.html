<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus APK Builder - Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.0/lucide.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background: #0b0f1a; color: #e2e8f0; }
        .code-font { font-family: 'Fira Code', monospace; }
        .glass-panel { background: rgba(17, 24, 39, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05); }
        .custom-scroll::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        .tab-btn { border-bottom: 2px solid transparent; transition: all 0.3s; }
        .tab-btn.active { border-color: #3b82f6; color: #3b82f6; background: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="min-h-screen p-4 md:p-6 overflow-x-hidden">

    <div class="max-w-7xl mx-auto">
        <!-- Üst Bar -->
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <div>
                <h1 class="text-2xl font-bold text-white tracking-tight flex items-center gap-2">
                    <i data-lucide="cpu" class="text-blue-500"></i> Nexus System V2
                </h1>
                <p class="text-slate-400 text-xs">C++, Python, Java ve HTML Entegre Geliştirme Ortamı</p>
            </div>
            <div class="flex gap-2">
                <button onclick="runMasterPreview()" class="bg-blue-600 hover:bg-blue-700 px-5 py-2 rounded-lg font-bold text-sm transition flex items-center gap-2 shadow-lg shadow-blue-900/20">
                    <i data-lucide="play" class="w-4 h-4"></i> ANA GÖRÜNTÜLE
                </button>
                <button onclick="openBuildModal()" class="bg-indigo-600 hover:bg-indigo-700 px-5 py-2 rounded-lg font-bold text-sm transition flex items-center gap-2 shadow-lg shadow-indigo-900/20">
                    <i data-lucide="package" class="w-4 h-4"></i> OLUŞTUR
                </button>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <!-- Editör Bölümü -->
            <div class="lg:col-span-8 space-y-4">
                <div class="glass-panel rounded-2xl overflow-hidden">
                    <div class="flex bg-slate-900/50 border-b border-slate-800">
                        <button onclick="changeLang('cpp')" id="btn-cpp" class="tab-btn active px-6 py-3 text-sm font-medium">C++</button>
                        <button onclick="changeLang('python')" id="btn-python" class="tab-btn px-6 py-3 text-sm font-medium">Python</button>
                        <button onclick="changeLang('java')" id="btn-java" class="tab-btn px-6 py-3 text-sm font-medium">Java</button>
                        <button onclick="changeLang('html')" id="btn-html" class="tab-btn px-6 py-3 text-sm font-medium">HTML</button>
                    </div>
                    <div class="relative">
                        <textarea id="main-editor" class="w-full h-[450px] bg-transparent p-6 code-font text-sm outline-none resize-none text-blue-100" spellcheck="false"></textarea>
                        <button onclick="previewSingle()" class="absolute bottom-4 right-4 bg-slate-800/80 hover:bg-slate-700 px-3 py-1.5 rounded border border-slate-600 text-[10px] font-bold flex items-center gap-2">
                            <i data-lucide="code-2" class="w-3 h-3"></i> KODU GÖRÜNTÜLE
                        </button>
                    </div>
                </div>

                <!-- 3D Model Import Bandı -->
                <div class="glass-panel p-4 rounded-2xl space-y-3">
                    <div class="flex justify-between items-center">
                        <h3 class="text-xs font-bold text-slate-500 uppercase flex items-center gap-2">
                            <i data-lucide="box" class="w-4 h-4"></i> 3D Model Bandı
                        </h3>
                        <label class="cursor-pointer bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-[10px] font-bold transition">
                            <i data-lucide="plus" class="inline w-3 h-3 mr-1"></i> 3D IMPORT
                            <input type="file" class="hidden" onchange="handle3DImport(event)">
                        </label>
                    </div>
                    <div id="model-shelf" class="flex gap-4 overflow-x-auto pb-2 custom-scroll min-h-[100px] items-center">
                        <div class="text-slate-600 text-[10px] italic w-full text-center">Henüz model eklenmedi. Modeller dile göre gruplanır.</div>
                    </div>
                </div>
            </div>

            <!-- Sağ Panel (Konsol) -->
            <div class="lg:col-span-4">
                <div class="glass-panel h-full rounded-2xl flex flex-col">
                    <div class="p-4 border-b border-slate-800 flex justify-between items-center">
                        <span class="text-[10px] font-bold text-slate-500 uppercase">Sistem Çıktısı</span>
                        <div class="flex gap-1">
                            <div class="w-2 h-2 rounded-full bg-red-500"></div>
                            <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                            <div class="w-2 h-2 rounded-full bg-green-500"></div>
                        </div>
                    </div>
                    <div id="terminal" class="flex-1 p-4 code-font text-[11px] overflow-y-auto space-y-1">
                        <div class="text-blue-400">[SYSTEM] Nexus Kernel yüklendi.</div>
                        <div class="text-slate-500">[SYSTEM] Giriş bekleniyor...</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- OLUŞTURMA PANELİ (MODAL) -->
    <div id="build-modal" class="fixed inset-0 bg-black/90 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-slate-900 w-full max-w-2xl rounded-3xl border border-slate-800 overflow-hidden flex flex-col shadow-2xl">
            <div class="p-6 bg-slate-800/50 border-b border-slate-700 flex justify-between items-center">
                <h2 class="text-xl font-bold">APK Oluşturma Sihirbazı</h2>
                <button onclick="closeBuildModal()" class="text-slate-400 hover:text-white transition"><i data-lucide="x"></i></button>
            </div>
            
            <div class="p-6 overflow-y-auto flex-1 space-y-8 custom-scroll max-h-[70vh]">
                <!-- Uygulama Bilgileri -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-500 uppercase">Uygulama İsmi</label>
                        <input id="build-app-name" type="text" placeholder="Benim Uygulamam" class="w-full bg-slate-800 border border-slate-700 p-3 rounded-xl outline-none focus:border-blue-500 transition">
                    </div>
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-500 uppercase">Uygulama İkonu</label>
                        <input type="file" class="w-full text-xs text-slate-400 file:bg-indigo-600 file:text-white file:border-0 file:px-4 file:py-2 file:rounded-lg file:mr-4 cursor-pointer">
                    </div>
                </div>

                <!-- Texture Ayarları -->
                <div class="space-y-4">
                    <h3 class="text-xs font-bold text-slate-500 uppercase">Dil Bazlı Texture Yükleme</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-slate-800/50 p-3 rounded-xl border border-slate-700">
                            <p class="text-[10px] font-bold text-blue-400 mb-2 uppercase">C++ Kaplaması</p>
                            <input type="file" class="text-[9px] w-full">
                        </div>
                        <div class="bg-slate-800/50 p-3 rounded-xl border border-slate-700">
                            <p class="text-[10px] font-bold text-yellow-400 mb-2 uppercase">Python Kaplaması</p>
                            <input type="file" class="text-[9px] w-full">
                        </div>
                        <div class="bg-slate-800/50 p-3 rounded-xl border border-slate-700">
                            <p class="text-[10px] font-bold text-red-400 mb-2 uppercase">Java Kaplaması</p>
                            <input type="file" class="text-[9px] w-full">
                        </div>
                        <div class="bg-slate-800/50 p-3 rounded-xl border border-slate-700">
                            <p class="text-[10px] font-bold text-orange-400 mb-2 uppercase">HTML Kaplaması</p>
                            <input type="file" class="text-[9px] w-full">
                        </div>
                    </div>
                </div>

                <!-- İzinler -->
                <div class="space-y-4">
                    <h3 class="text-xs font-bold text-slate-500 uppercase">Gereken İzinler (Tümü)</h3>
                    <div class="bg-slate-800 rounded-2xl p-4 border border-slate-700 space-y-2 max-h-48 overflow-y-auto custom-scroll">
                        <label class="flex items-center justify-between p-2 hover:bg-slate-700/50 rounded-lg cursor-pointer transition">
                            <span class="text-sm">Kamera Erişimi</span>
                            <input type="checkbox" class="w-5 h-5 accent-blue-500">
                        </label>
                        <label class="flex items-center justify-between p-2 hover:bg-slate-700/50 rounded-lg cursor-pointer transition">
                            <span class="text-sm">Dosya Okuma/Yazma</span>
                            <input type="checkbox" class="w-5 h-5 accent-blue-500">
                        </label>
                        <label class="flex items-center justify-between p-2 hover:bg-slate-700/50 rounded-lg cursor-pointer transition">
                            <span class="text-sm">Telefon Rehberi ve Durumu</span>
                            <input type="checkbox" class="w-5 h-5 accent-blue-500">
                        </label>
                        <label class="flex items-center justify-between p-2 hover:bg-slate-700/50 rounded-lg cursor-pointer transition">
                            <span class="text-sm">Hassas Konum Bilgisi</span>
                            <input type="checkbox" class="w-5 h-5 accent-blue-500">
                        </label>
                        <label class="flex items-center justify-between p-2 hover:bg-slate-700/50 rounded-lg cursor-pointer transition">
                            <span class="text-sm">Mikrofon Kaydı</span>
                            <input type="checkbox" class="w-5 h-5 accent-blue-500">
                        </label>
                        <label class="flex items-center justify-between p-2 hover:bg-slate-700/50 rounded-lg cursor-pointer transition">
                            <span class="text-sm">Arka Plan İnternet Kullanımı</span>
                            <input type="checkbox" class="w-5 h-5 accent-blue-500">
                        </label>
                    </div>
                </div>
            </div>

            <div class="p-6 bg-slate-900 border-t border-slate-800">
                <button onclick="finalBuild()" class="w-full bg-green-600 hover:bg-green-700 py-4 rounded-2xl font-bold text-lg shadow-lg shadow-green-900/20 transition flex items-center justify-center gap-3">
                    <i data-lucide="check-circle"></i> SİSTEMİ DERLE VE APK OLUŞTUR
                </button>
            </div>
        </div>
    </div>

    <!-- ANA GÖRÜNTÜLEME PANELİ -->
    <div id="master-panel" class="fixed inset-0 bg-[#05070a] hidden z-[60] flex flex-col">
        <div class="p-4 border-b border-white/5 flex justify-between items-center bg-slate-950">
            <h2 class="text-sm font-bold tracking-widest text-slate-400">MASTER SYSTEM INTEGRATION</h2>
            <button onclick="closeMasterPreview()" class="bg-red-500/10 text-red-500 p-2 rounded-lg"><i data-lucide="x"></i></button>
        </div>
        <div class="flex-1 grid grid-cols-1 md:grid-cols-2 gap-2 p-2 overflow-hidden">
            <!-- HTML: İnternet / UI -->
            <div class="bg-white rounded-lg overflow-hidden flex flex-col border-4 border-slate-800 shadow-2xl">
                <div class="bg-slate-200 p-1 text-[10px] text-slate-500 flex items-center gap-2">
                    <i data-lucide="globe" class="w-3 h-3"></i> https://nexus-app.internal
                </div>
                <iframe id="master-html-frame" class="flex-1 w-full border-none"></iframe>
            </div>
            <!-- Python: Ekran / Grafik -->
            <div class="bg-slate-900 rounded-lg p-4 flex flex-col border border-white/5 overflow-hidden">
                <div class="text-[10px] text-yellow-500 font-bold mb-2 uppercase">Python Ekran Çıktısı</div>
                <div id="master-py-screen" class="flex-1 border border-slate-700 rounded bg-black/50 flex items-center justify-center text-center p-6">
                    <div class="space-y-4">
                        <i data-lucide="monitor" class="w-16 h-16 text-slate-800 mx-auto"></i>
                        <div id="py-status-text" class="text-xs text-slate-500 font-mono">Python UI bekliyor...</div>
                    </div>
                </div>
            </div>
            <!-- C++: Çıktı / Core -->
            <div class="bg-black rounded-lg p-4 font-mono text-[11px] border border-white/5 overflow-y-auto custom-scroll">
                <div class="text-blue-500 font-bold mb-2 uppercase">C++ Core Terminal</div>
                <div id="master-cpp-log" class="text-green-500"></div>
            </div>
            <!-- Java: Çıktı / Runtime -->
            <div class="bg-black rounded-lg p-4 font-mono text-[11px] border border-white/5 overflow-y-auto custom-scroll">
                <div class="text-red-500 font-bold mb-2 uppercase">Java Runtime Output</div>
                <div id="master-java-log" class="text-blue-300"></div>
            </div>
        </div>
    </div>

    <script>
        let currentLang = 'cpp';
        const codeStorage = {
            cpp: '// C++ Core System\n#include <iostream>\n\nint main() {\n    std::cout << "Nexus Kernel: Aktif" << std::endl;\n    std::cout << "Bellek optimizasyonu tamamlandı." << std::endl;\n    return 0;\n}',
            python: '# Python UI Modülü\nprint("Arayüz yükleniyor...")\nprint("Grafik birimi bağlandı.")',
            java: '// Java Runtime İşlemleri\npublic class App {\n    public static void main(String[] args) {\n        System.out.println("Java Sanal Makinesi Çalışıyor...");\n    }\n}',
            html: '<!-- Web Arayüzü -->\n<body style="background:#f0f2f5; font-family:sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh;">\n  <h1 style="color:#1a73e8;">Nexus App</h1>\n  <p>Bu ekran HTML tarafından yönetiliyor.</p>\n  <button style="background:#1a73e8; color:white; border:none; padding:10px 20px; border-radius:5px; cursor:pointer;">Harekete Geç</button>\n</body>'
        };

        const importedModels = [];

        function changeLang(lang) {
            codeStorage[currentLang] = document.getElementById('main-editor').value;
            currentLang = lang;
            document.getElementById('main-editor').value = codeStorage[lang];

            // UI Tab Update
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${lang}`).classList.add('active');

            const colors = { cpp: 'text-blue-100', python: 'text-yellow-100', java: 'text-red-100', html: 'text-orange-50' };
            document.getElementById('main-editor').className = `w-full h-[450px] bg-transparent p-6 code-font text-sm outline-none resize-none ${colors[lang]}`;
            
            addTerminal(`Dil değiştirildi: ${lang.toUpperCase()}`, 'text-slate-500');
        }

        function handle3DImport(e) {
            const file = e.target.files[0];
            if (file) {
                const model = { id: Date.now(), name: file.name, lang: currentLang };
                importedModels.push(model);
                renderModels();
                addTerminal(`3D Model eklendi: ${file.name} (${currentLang})`, 'text-blue-400');
            }
        }

        function renderModels() {
            const shelf = document.getElementById('model-shelf');
            if (importedModels.length === 0) return;
            
            shelf.innerHTML = importedModels.map(m => `
                <div class="min-w-[130px] p-3 bg-slate-800/80 rounded-xl border border-slate-700 flex flex-col items-center gap-2 group relative animate-in fade-in duration-300">
                    <div class="w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center text-blue-500">
                        <i data-lucide="box" class="w-6 h-6"></i>
                    </div>
                    <div class="text-center overflow-hidden w-full">
                        <p class="text-[9px] font-bold truncate">${m.name}</p>
                        <p class="text-[8px] text-slate-500 uppercase">${m.lang} Entegre</p>
                    </div>
                    <button onclick="removeModel(${m.id})" class="absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition p-1 bg-red-500/20 text-red-500 rounded">
                        <i data-lucide="trash-2" class="w-3 h-3"></i>
                    </button>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function removeModel(id) {
            const index = importedModels.findIndex(m => m.id === id);
            if (index > -1) importedModels.splice(index, 1);
            renderModels();
        }

        function addTerminal(msg, colorClass = 'text-white') {
            const term = document.getElementById('terminal');
            const line = document.createElement('div');
            line.className = colorClass;
            line.innerHTML = `<span class="opacity-30">[${new Date().toLocaleTimeString()}]</span> ${msg}`;
            term.prepend(line);
        }

        function previewSingle() {
            addTerminal(`${currentLang.toUpperCase()} Modülü tekil olarak çalıştırılıyor...`, 'text-indigo-400');
            setTimeout(() => {
                alert(`Kod Görüntüleyici:\n\n${currentLang.toUpperCase()} çıktıları başarıyla terminale aktarıldı.`);
            }, 300);
        }

        function runMasterPreview() {
            codeStorage[currentLang] = document.getElementById('main-editor').value;
            document.getElementById('master-panel').classList.remove('hidden');
            
            // HTML frame set
            const frame = document.getElementById('master-html-frame');
            frame.srcdoc = codeStorage.html;

            // Log set
            document.getElementById('master-cpp-log').innerHTML = "> " + codeStorage.cpp.split('\n').join('<br>> ');
            document.getElementById('master-java-log').innerHTML = "> " + codeStorage.java.split('\n').join('<br>> ');
            
            document.getElementById('py-status-text').innerHTML = "Python UI Motoru Aktif.<br>Görüntü işleme devam ediyor...";
            addTerminal("ANA GÖRÜNTÜLEME MODU AKTİF", 'text-green-500 font-bold');
        }

        function closeMasterPreview() {
            document.getElementById('master-panel').classList.add('hidden');
        }

        function openBuildModal() { document.getElementById('build-modal').classList.remove('hidden'); }
        function closeBuildModal() { document.getElementById('build-modal').classList.add('hidden'); }

        function finalBuild() {
            const name = document.getElementById('build-app-name').value || "NexusApp";
            closeBuildModal();
            addTerminal(`DERLEME İŞLEMİ BAŞLATILDI: ${name}`, 'text-yellow-500 font-bold');
            
            // Progress simülasyonu
            setTimeout(() => addTerminal("Tüm kodlar (C++, Py, Java, HTML) birleştiriliyor...", 'text-slate-400'), 500);
            setTimeout(() => addTerminal("İzinler APK Manifest dosyasına yazılıyor...", 'text-slate-400'), 1200);
            setTimeout(() => addTerminal("3D modeller Asset klasörüne taşınıyor...", 'text-slate-400'), 1800);
            setTimeout(() => {
                addTerminal(`BAŞARILI: ${name}.apk dosyası hazır!`, 'text-green-500 font-bold');
                
                // APK Dosyası indirme simülasyonu
                const blob = new Blob(["PK\x03\x04...APK_BINARY_DATA..."], { type: "application/vnd.android.package-archive" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${name}.apk`;
                a.click();
            }, 3000);
        }

        // Init
        document.getElementById('main-editor').value = codeStorage.cpp;
        lucide.createIcons();
    </script>
</body>
</html>

